# GIS 基础

## GIS 数据

### 矢量数据

矢量数据是以点线、线、面的形式来表现客观世界中的实体。地理空间信息决定了地理实体在某一坐标系中的位置，属性信息是从多个维度对地理要素进行描述

在 GIS 中，矢量数据通常以Shapefile、GeoJSON、KML 等格式进行存储和处理

#### 点数据

点实体可以代指由单独一对（x,y）或 （x,y,z）坐标定位的一切地理或制图实体，

1. 点标注：点数据可以用于标注地图上的重要地点或物，如城市，机场、景点、医院等，以便用户快速定位和识别
1. 点聚合：点数据可以用于对大量的点进行聚合，以便更好的显示和分析数据，如在地图上显示热点分布，人口密度等
1. 点分析：通过点数据进行分析，例如计算点之间的距离、寻找最近的点、进行空间插值
1. 点采集：可以通过 GPS 等测量工具进行采集，以便收集和更新地理信息数据

#### 线

线实体可以定义为许多直线元素组成的各种线性要素，一个直线元素由两（x,y）坐标表示，最简单的线实体只存储它的起点和终点坐标。线实体还可以存储它的属性，显示符号等。例如，存储用于表示线实体输出形态的符号信息，虽然线实体并不是以虚线存储，，但可以通过显示符号将其以虚线形式进行输出

表示线的（x,y）坐标点的数量越多，线就越逼近一条曲线，在 WebGIS 开发中，由于存储的点越多，所需要的存储空间越大，实际应用中经常需要为实现某些特定需求而对线实体进行一些处理，如 对线的坐标抽稀等，这样既能够节省存储空间，还可以在满足业务的要求下表达一个完整的线实体

线实体在 GIS 中用来表示线状地物，如公路、水系、山脊线，还可以用来表示符号线和多边形边界，实际业务中可以做路线规划，管道分析，河流分析等

#### 面数据

也称多边形数据，是描述地理空间信息的最重要的数据类型之一，多边形数据不但需要表示位置和属性信息，更重要的是表明区域的拓扑特征，如多边形形状、相邻性等。由于要表示的信息十分丰富，基于多边形的运算也多而复杂，多边形的矢量编码也比点和线实体要复杂的多。在地图中，每个多边形都应该具有唯一的形状、面积和周长。

1. 空间分析：计算面积、计算空间关系、进行缓冲分析
1. 地图制图：绘制地图，行政区划图，土地利用图、地形图
1. 土地管理：制定城市规划，土地利用规划
1. 空间查询：查询某个区域内的建筑物、水域等

矢量数据具有数据存储量小，空间位置精度高的特点，可以利用矢量数据存储多个属性信息，对空间实体进行多维度的描述和展现，进行地图综合等。也正是因为矢量数据可以存储大量辅助信息的原因，导致矢量数据的数据结构复杂，数据存储需要的空间会随着信息量的增多而增大

### 栅格数据

栅格数据是将空间划分成很多有规律的网格，每一个网格表示空间上相同大小的范围，栅格数据网格单元的值表示该空间范围内被计算出来的某一属性值，每一个栅格所表示的地面实际范围大小被称为分辨率

遥感影像的每一个单元格，都包括至少三个波段

栅格数据的可编辑性较小，常见的编辑需求是栅格数据灰度化或色彩化等。除此之外，更多是作为图层展示

栅格数据的文件格式有 TIFF、IMAGE、NC 等，存储相同范围的栅格数据所需要的空间一般远大于矢量数据。另外，栅格数据不能像矢量数据一样被无限放大，只能够在分辨率允许的范围内进行缩放，展示有限的信息

从数据特征来看：栅格数据有连续型和离散型两种，连续型数据如气温和高程数据，离散型数据如人口密度图等

1. 地形分析：利用栅格数据进行地形分析，例如计算坡度，破向、高程等信息
1. 气象分析：栅格数据可以用于气象分析，例如计算降雨量、温度等信息
1. 遥感影像：卫星影像、航空摄影，可用于地物识别和分析
1. 土地利用：栅格数据可以用于表示土地利用，例如指定土地利用规划、进行土地变化分析等

在 webGIS 中，栅格数据以文件形式存储在服务器上，然后将他们发布成 WMS、WCS、WMTS 等格式的服务进行使用

## 投影与坐标转换

坐标系是一种用于表示地理要素，影像或地物位置的参照系统，GIS 中的坐标系有两种：地理坐标系和投影坐标系

### 地理坐标

地理坐标使用三维球面定义地球上的位置，包括测量的角度单位、本初子午线和基础面

在地理坐标系中，使用经度和纬度表示一个点。经度和纬度是从地心到地球表面上某点的测量角。通常以十进制度或百分度为单位来测量。其中，纬度是相对于赤道进行测量，范围为-90°（南极点）~ +90°（北极点），经度值相对于本初子午线进行测量，范围为-180°（向西进行时）~ +180°（向东进行时）

### 投影坐标

投影坐标系在二维平面中进行定义，与地理坐标系不同，它始终基于地理坐标系展示。地图投影是将地球上的地理坐标系通过一定的数学法则变换后，投影到平面上形成直角坐标系的过程。投影坐标的单位是长度单位，参考面是水平面。在投影坐标系中，坐标位置通过网格的（x,y）坐标来进行标识，坐标原点位于网格中心，x、y 值分别为该点相对于中心点的坐标

投影可分为等角投影、等积投影、等距投影、等方位投影、任意投影。从投影曲面或投影方式区分，地图投影可分为圆锥投影、圆柱投影、方位投影。还有另外一种类型：伪投影

### Web 墨卡托投影

地图投影无法避免与真实位置之间的偏差，需要根据投影范围的大小和对变形的要求选择合适的投影，Web 墨卡托投影就是一种既能在大范围上面积变形较小，又能够在小范围内保证角度变形较小的投影方式

Web 墨卡托投影使用球面公式（正球体公式）。对于小比例尺地图，它与标准墨卡托投影使用的公式一样。大比例尺的墨卡托投影通常采用椭球面形式，而 Web 墨卡托投影通常采用球面形式。这种差异在全球比例尺下是察觉不到的，但在局部地区会同一比例尺的椭球面墨卡托投影存在偏离，而且离赤道越远，这种偏差就越大

墨卡托投影将极点投影在无穷远处，所以使用 Web 墨卡托投影的地图无法显示极点。谷歌地图之类的服务会在南北纬 85.051129° 切断覆盖，让整个投影地图变成正方形。这不会对街道地图造成什么影响，因为这些服务的主要目的不在于显示完整的地球。

Web 墨卡托投影与球面墨卡托具有相同的特点；经线是等距的垂直线，角度在局部正确（假设是球面坐标），但面积会随着离赤道越来越远而膨胀，以至于极地区域被严重夸大。在 WebGIS 开发中，使用 Web 墨卡托投影的地图进行分级切片，同级别的瓦片中，高纬度和低纬度的比例尺不同，同比例尺的栅格瓦片存在于不同的级别中。这一特点用户感知不到，但在开发实践中，需要从技术上进行特别处理

### 坐标转换与 EPSG

常见转换方法：三参数法、七参数法、莫洛金斯基方法、基于网格的方法，以及国家坐标系变换的各种方法

EPSG 是一个专门负责地理空间参考系统研究和标准指定的组织，对于各种地理坐标和投影坐标系统进行了编号，并定义了进行坐标转换的方法。在使用时只需要指定具体的 EPSG 代码，就可以直接进行转换

EPSG 规范的统一格式为：EPSG：编号，如 WGS84 地理坐标的编码为 EPSG:4326，Web 墨卡托投影为 EPSG:3857。通过这种简单的方式，可以将两种坐标系进行直接转换。EPSG 还有很多适用于区域、全国、全球等多种尺度的投影，在 WebGIS 中，使用 EPSG 标准可以方便地进行地图数据的投影变换和坐标转换，以实现更加精确和可靠的地图显示和空间分析

## 地理编码

地理编码是将坐标对、地址或地名等位置描述转换为地球表面上某位置的过程，地理空间中的一个具体位置，既可以用一组经纬度表示，也可以用一个文本进行描述。以使用地图软件为例，当我们在地图软件搜索框中输入一个餐厅的名字，它就可以准确定位并导航到该位置，这个过程用的就是地理编码

**地理编码的用途**：

1. 地图应用程序：在地图应用程序中，地理编码可以将用户输入的地址或地名转换为地理坐标，用于标记地点、显示地图、进行地图搜索等
1. 位置服务：地理编码可以用于查找用户的当前位置、显示周边点、提供导航功能等
1. 